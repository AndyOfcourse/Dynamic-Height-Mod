package net.multiverse.dynamicheight.client;public final class WorldHeightScreenHooks{private static final net.minecraft.network.chat.Component HEADER=net.minecraft.network.chat.Component.literal("Custom Height Settings"),FLOOR_LABEL=net.minecraft.network.chat.Component.literal("Floor (min Y)"),CEILING_LABEL=net.minecraft.network.chat.Component.literal("Ceiling (max Y)");private static LabelWidget a,b;private static net.minecraft.client.gui.components.EditBox c,d;private static net.minecraft.client.gui.components.Button e;private WorldHeightScreenHooks(){}public static void register(){net.minecraftforge.common.MinecraftForge.EVENT_BUS.addListener(WorldHeightScreenHooks::f);net.minecraftforge.common.MinecraftForge.EVENT_BUS.addListener(WorldHeightScreenHooks::g);}private static void f(net.minecraftforge.client.event.ScreenEvent.Init.Post ev){net.minecraft.client.gui.screens.Screen s=ev.getScreen();if(!(s instanceof net.minecraft.client.gui.screens.worldselection.CreateWorldScreen w))return;a=b=null;c=d=null;e=null;int W=220,X=20,F=W*2/5,Y=20;net.minecraft.client.gui.Font font=net.minecraft.client.Minecraft.getInstance().font;e=net.minecraft.client.gui.components.Button.builder(HEADER,x->{net.multiverse.dynamicheight.client.WorldHeightSettings.resetToDefaults();h(w);i(w);}).bounds(X,Y,W,20).tooltip(net.minecraft.client.gui.components.Tooltip.create(net.minecraft.network.chat.Component.literal("Reset to the default overworld height"))).build();ev.addListener(e);int y=Y+28;a=new LabelWidget(X,y,F,10,FLOOR_LABEL,font);ev.addListener(a);c=new net.minecraft.client.gui.components.EditBox(font,X,y+=12,F,20,FLOOR_LABEL);c.setValue(""+net.multiverse.dynamicheight.client.WorldHeightSettings.getMinY());c.setFilter(WorldHeightScreenHooks::j);c.setTooltip(net.minecraft.client.gui.components.Tooltip.create(net.minecraft.network.chat.Component.literal("Clamped to multiples of 16 down to vanilla minimum (-64).")));c.setResponder(v->{Integer p=k(v);if(p!=null){net.multiverse.dynamicheight.client.WorldHeightSettings.setMinY(p);i(w);}});ev.addListener(c);b=new LabelWidget(X,y+=28,F,10,CEILING_LABEL,font);ev.addListener(b);d=new net.minecraft.client.gui.components.EditBox(font,X,y+=12,F,20,CEILING_LABEL);d.setValue(""+net.multiverse.dynamicheight.client.WorldHeightSettings.getMaxY());d.setFilter(WorldHeightScreenHooks::j);d.setTooltip(net.minecraft.client.gui.components.Tooltip.create(net.minecraft.network.chat.Component.literal("Snaps to 16-block steps and never below vanilla ceiling.")));d.setResponder(v->{Integer p=k(v);if(p!=null){net.multiverse.dynamicheight.client.WorldHeightSettings.setMaxY(p);i(w);}});ev.addListener(d);i(w);h(w);}private static void g(net.minecraftforge.client.event.ScreenEvent.Render.Post ev){net.minecraft.client.gui.screens.Screen s=ev.getScreen();if(s instanceof net.minecraft.client.gui.screens.worldselection.CreateWorldScreen w)h(w);}private static void h(net.minecraft.client.gui.screens.worldselection.CreateWorldScreen s){if(e!=null){e.visible=e.active=true;}if(c!=null){if(!c.isFocused())c.setValue(""+net.multiverse.dynamicheight.client.WorldHeightSettings.getMinY());c.visible=c.active=true;}if(d!=null){if(!d.isFocused())d.setValue(""+net.multiverse.dynamicheight.client.WorldHeightSettings.getMaxY());d.visible=d.active=true;}}private static boolean j(String v){return v==null||v.isEmpty()||"-".equals(v)||k(v)!=null;}private static Integer k(String v){if(v==null||v.isEmpty()||"-".equals(v))return null;try{return Integer.parseInt(v);}catch(Exception x){return null;}}private static void i(net.minecraft.client.gui.screens.worldselection.CreateWorldScreen s){}private static final class LabelWidget extends net.minecraft.client.gui.components.AbstractWidget{private final net.minecraft.client.gui.Font f;private LabelWidget(int x,int y,int w,int h,net.minecraft.network.chat.Component m,net.minecraft.client.gui.Font f2){super(x,y,w,h,m);f=f2;this.active=false;}public void renderButton(com.mojang.blaze3d.vertex.PoseStack p,int a,int b,float c){f.draw(p,getMessage(),getX(),getY(),0xFFFFFF);}protected void updateWidgetNarration(net.minecraft.client.gui.narration.NarrationElementOutput o){} }}